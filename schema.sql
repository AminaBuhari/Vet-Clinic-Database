/* Database schema to keep the structure of entire database. */

CREATE TABLE Animals (
    id            INT GENERATED BY DEFAULT AS IDENTITY,
    name TEXT NOT NULL, 
    date_of_birth DATE NOT NULL, 
    escape_attempts INT NOT NULL, 
    neutered BOOLEAN NOT NULL, 
    weight_kg DECIMAL NOT NULL,
    PRIMARY KEY(id)
)

ALter table Animals ADD species TEXT NOT NULL;

CREATE TABLE owners (
    id            SERIAL PRIMARY KEY,
    full_name TEXT NOT NULL;
    age INT NOT NULL; 
)

CREATE TABLE species (
    id        SERIAL PRIMARY KEY,
   name TEXT NOT NULL; 
)

-- Modify animals table:

--     Make sure that id is set as autoincremented PRIMARY KEY



BEGIN;
ALTER TABLE Animals DROP CONSTRAINT "GENERATED BY DEFAULT AS IDENTITY" FROM id;
ALTER TABLE Animals ADD CONSTRAINT "SERIAL" PRIMARY KEY (id);
COMMIT;

--     Remove column species
ALTER TABLE ANIMALS DROP species; 

--     Add column species_id which is a foreign key referencing species table

ALter table animals ADD species_id INT NOT NULL;
ALTER TABLE animals ADD CONSTRAINT species_constraints FOREIGN KEY (species_id) REFERENCES species(id);

--     Add column owner_id which is a foreign key referencing the owners table

ALter table animals ADD owner_id INT NOT NULL;
ALTER TABLE animals ADD CONSTRAINT owner_constraints FOREIGN KEY (owner_id) REFERENCES owners(id);

--  Create a table named vets with the following columns:

CREATE TABLE vets (
    id INT GENERATED BY DEFAULT AS IDENTITY,
    name TEXT,
    age INT,
    date_of_graduation DATE
);

CREATE TABLE specializations (
    vet_id INT,
    specialization_id INT
);

CREATE TABLE visits (
    vet_id INT,
    animal_id INT,
    date_of_visit DATE
);